FROM node:20-alpine

WORKDIR /app

# Copy package files
COPY package.json yarn.lock ./

# Install dependencies
RUN yarn install

# Copy CLI files and required modules
COPY cli ./cli
COPY src/utils ./src/utils
COPY src/cli.js ./src/cli.js
COPY src/services ./src/services

# Set API URL environment variable to be configurable
ENV API_URL=http://localhost:3000/api

# Set entrypoint to CLI
ENTRYPOINT ["node", "src/cli.js"]